# Wails + Svelte í”„ë¡œì íŠ¸ ë””ë²„ê¹… ì •ë¦¬

---

## âœ… ìµœì¢… ëª©í‘œ
- Wails ì•±ì—ì„œ Svelte ê¸°ë°˜ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ì‚¬ìš©í•´
- ê²€ìƒ‰ì–´ ì…ë ¥ + ë²„íŠ¼ í´ë¦­ â†’ Go í•¨ìˆ˜ í˜¸ì¶œ â†’ ê²°ê³¼ ì¶œë ¥

---

## ğŸ§¨ ì˜¤ëŠ˜ ë°œìƒí•œ ì£¼ìš” ì˜¤ë¥˜ ë° ì›ì¸ ë¶„ì„

### 1. `Uncaught TypeError: Cannot read properties of undefined (reading 'call')`

#### ğŸ”¹ ì›ì¸
- Vite 6 ë²ˆë“¤ ë°©ì‹ì´ Wails WebView2ì™€ í˜¸í™˜ë˜ì§€ ì•ŠìŒ
- `@sveltejs/vite-plugin-svelte`ê°€ ESM ì „ìš©ì¸ë°, `vite.config.js`ê°€ CommonJS(`require`) í˜•ì‹ì´ë¼ ì¶©ëŒ

#### ğŸ”§ í•´ê²°
- `vite.config.js` â†’ `vite.config.mjs`ë¡œ ë³€ê²½
- `import` ë¬¸ë²• ì‚¬ìš© (ESM ìŠ¤íƒ€ì¼)
- `vite` ë²„ì „ `5.0.10` ë˜ëŠ” `4.5.0` ê¶Œì¥

---

### 2. `Cannot read properties of undefined (reading 'Crawler')`

#### ğŸ”¹ ì›ì¸
- Go ì½”ë“œì—ì„œ `Bind` ì„¤ì •ì´ ëˆ„ë½ë¨
- `Crawler` êµ¬ì¡°ì²´ í˜¹ì€ ë©”ì„œë“œëª…ì´ ì†Œë¬¸ìë¡œ ì„ ì–¸ë˜ì–´ JSì—ì„œ export ë˜ì§€ ì•ŠìŒ

#### ğŸ”§ í•´ê²°
- `main.go`ì—ì„œ ë°˜ë“œì‹œ ë°”ì¸ë”© ëª…ì‹œ:
  ```go
  Bind: []interface{}{crawler}, // ë˜ëŠ” []any{crawler}


crawler.go ë‚´ ëª¨ë“  export ëŒ€ìƒì€ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•´ì•¼ í•¨:

go
ë³µì‚¬
í¸ì§‘
type Crawler struct{}
func (c *Crawler) FetchTags(keyword string) []string

3. favicon.ico 404 ì—ëŸ¬
ğŸ”¹ ì›ì¸
frontend/dist/favicon.ico íŒŒì¼ ì—†ìŒ

ğŸ”§ í•´ê²°
ë¬´ì‹œ ê°€ëŠ¥ (ì•± ë™ì‘ì—ëŠ” ì˜í–¥ ì—†ìŒ)

ë˜ëŠ” ë¹ˆ favicon.ico ì¶”ê°€ ê°€ëŠ¥

4. effect_orphan ì—ëŸ¬ (Svelte ëŸ°íƒ€ì„ ì˜¤ë¥˜)
ğŸ”¹ ì›ì¸
í…œí”Œë¦¿ ë‚´ì—ì„œ window.backend?.Crawler ê°™ì€ ì™¸ë¶€ ê°ì²´ë¥¼ ì§ì ‘ {#if} ì¡°ê±´ë¬¸ì— ì‚¬ìš©í•¨

Svelte ë°˜ì‘ì„± ì¶”ì  ì‹¤íŒ¨

ğŸ”§ í•´ê²°
ë°˜ë“œì‹œ ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œ let backendReady = ... ìƒíƒœ ë³€ìˆ˜ë¡œ ë¶„ë¦¬í•˜ê³  ì‚¬ìš©

onMount() ë˜ëŠ” $: êµ¬ë¬¸ìœ¼ë¡œ ë°˜ì‘í˜• ì²˜ë¦¬ í•„ìš”


# 1. frontend ë””ë ‰í† ë¦¬ì—ì„œ ì˜ì¡´ì„± ì„¤ì¹˜
cd frontend
npm install

# 2. í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
npm run build

# 3. ë£¨íŠ¸ë¡œ ì´ë™ í›„ Wails ê°œë°œ ì„œë²„ ì‹¤í–‰
cd ..
wails dev

ğŸ“Œ êµ¬ì„± íŒŒì¼ ìš”ì•½
vite.config.mjs

import { defineConfig } from 'vite';
import { svelte } from '@sveltejs/vite-plugin-svelte';

export default defineConfig({
  base: './',
  plugins: [svelte()],
  publicDir: false,
  build: {
    outDir: 'dist',
    emptyOutDir: true
  }
});


package.json (ê¶Œì¥ ë²„ì „)

{
  "devDependencies": {
    "vite": "^5.0.10",
    "@sveltejs/vite-plugin-svelte": "^2.0.0",
    "svelte": "^3.59.2"
  }
}
